import{C as r}from"./vendor-adcc401c.js";import{c as e,L as o,F as a}from"./AvailablePages.store-4be7f7f6.js";const s=function(){const{subscribe:s,update:n}=r({loggedIn:!1});function t(r){n((e=>(null==r?(e.loggedIn=!1,e.profile=null):(e.loggedIn=!0,e.profile=r),e)))}return{subscribe:s,async authorize(r){const a=await e.mutate(o,{variables:{token:r}});a.errors?console.error("graphql authorize mutation error",a.errors):t(a.data.login)},fetchMe:async()=>new Promise(((r,o)=>{e.query(a).subscribe((e=>{var a;e.loading||(e.error?(console.error("graphql fetchme query error",e.error),o({error:!0})):(t(null==(a=e.data)?void 0:a.me),r(e)))}))}))}}();export{s as C};
