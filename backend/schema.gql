# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Profile {
  _id: String!
  email: String!
  username: String
  token: String!
  projects: [Project!]!
}

type Project {
  """Unique project's id"""
  _id: String!

  """Non-unique project name"""
  name: String!

  """Optional project description"""
  description: String

  """Project's Settings object"""
  settings: ProjectSettings!
  members: [ProjectMember!]!
}

type ServerSettings {
  onlineMode: Boolean!
  whitelist: Boolean!
  address: String
}

type ProjectSettings {
  server: ServerSettings!
}

type MemberPermission {
  """ProjectMember instance of a person who added this permission"""
  issuer: ProjectMember!

  """Permission enumerable"""
  permission: Permission!
}

enum Permission {
  START
  STOP
  DELETE_PROJECT
  UPDATE_SERVER_SETTINGS
  SUBSCRIBE_TO_WORKER_STATE
}

type MemberPermissions {
  """Unix date when last changes were made"""
  lastModified: Float

  """Set of MemberPermission objects"""
  list: [MemberPermission!]
}

type ProjectMember {
  """Unique ProjectMember instance id"""
  _id: String!
  profile: Profile!

  """Member's role"""
  role: MemberRole!
  permissions: MemberPermissions!
}

enum MemberRole {
  OWNER
  DEVELOPER
}

type WorkerRegion {
  id: String!
  name: String!
  location: String!
}

type WorkerState {
  state: ProjectWorkerState!
  region: WorkerRegion
  address: String
  project: Project!
  plugins: [Plugin!]!
}

enum ProjectWorkerState {
  DEAD
  ASSIGNING
  STARTING
  RUNNING
}

type PluginNode {
  code: NodeCode!
  inputs: [NodeInput!]!
  outputs: [NodeOutput!]!
}

type NodeCode {
  raw: String!
}

type NodeInput {
  _id: String!
  id: String!
  type: String!
  color: String
  description: String
  name: String
}

type NodeOutput {
  _id: String!
  type: String!
  color: String
  description: String
  name: String
}

type Plugin {
  name: String!
  description: String
  public: Boolean!
  creator: Profile!
  nodes: [PluginNode!]!
}

type DashboardConfig {
  """System ID of ProjectDashboardConfig instance"""
  _id: String!

  """
  Type of this DashboardConfig (either PROJECT, CODE_EDITOR or VISUAL_EDITOR or else...)
  """
  type: EDashboardType!

  """Display name of DashboardConfig"""
  name: String!

  """Project instance of this DashboardConfig (type: PROJECT)"""
  project: Project!

  """Profile instance, that's assosiated with this DashboardConfig"""
  profile: Profile!

  """Array of DashboardWidget's assosiated with this DashboardConfig"""
  widgets: [DashboardWidget!]!
}

"""
DashboardConfig Type (either PROJECT, CODE_EDITOR, VISUAL_EDITOR or similar...)
"""
enum EDashboardType {
  PROJECT
  CODE_EDITOR
  VISUAL_EDITOR
}

union DashboardWidget = ControlsWidget | ConsoleWidget | PlayersWidget | LogsWidget

type ConsoleWidget {
  type: String!
  enabled: Boolean!

  """X coordinate of DashboardWidget's position"""
  x: Float!

  """Y coordinate of DashboardWidget's position"""
  y: Float!

  """DashboardWidget's width"""
  height: Float!

  """DashboardWidget's height"""
  width: Float!
}

type ControlsWidget {
  type: String!
  enabled: Boolean!

  """X coordinate of DashboardWidget's position"""
  x: Float!

  """Y coordinate of DashboardWidget's position"""
  y: Float!

  """DashboardWidget's width"""
  height: Float!

  """DashboardWidget's height"""
  width: Float!
}

type LogsWidget {
  type: String!
  enabled: Boolean!

  """X coordinate of DashboardWidget's position"""
  x: Float!

  """Y coordinate of DashboardWidget's position"""
  y: Float!

  """DashboardWidget's width"""
  height: Float!

  """DashboardWidget's height"""
  width: Float!
}

type PlayersWidget {
  type: String!
  enabled: Boolean!

  """X coordinate of DashboardWidget's position"""
  x: Float!

  """Y coordinate of DashboardWidget's position"""
  y: Float!

  """DashboardWidget's width"""
  height: Float!

  """DashboardWidget's height"""
  width: Float!
}

type Query {
  me: Profile!

  """Get Project instance from Project's id"""
  Project(projectId: String!): Project!

  """Fetch all ProjectObject's of a current profile"""
  ProfileProjects: [Project!]!
  DashboardById(id: String!): DashboardConfig!
  DashboardByProfileInResource(id: String!, type: EDashboardType!): [DashboardConfig!]!
  CurrentDashboard(resourceId: String!, resourceType: EDashboardType!): DashboardConfig
}

type Mutation {
  login(token: String!): Profile!

  """Create new project using data passed into CreateProjectInput"""
  CreateProject(input: CreateProjectInput!): Project!

  """Deletes Project with passed _id and returns it"""
  DeleteProject(projectId: String!): Project!
  UpdateServerSettings(input: UpdateServerSettingsInput!, projectId: String!): ProjectSettings!
  CreateDashboard(resourceId: String!, resourceType: EDashboardType!, input: CreateProjectInput!): DashboardConfig!
  UpdateDashboard(input: UpdateDashboardConfigInput!, dashboardId: String!): DashboardConfig!
  SetCurrentDashboard(dashboardId: String!, resourceId: String!): DashboardConfig!
  UpdateControlsWidget(input: UpdateControlsWidgetInput!, dashboardId: String!): ControlsWidget!
  UpdateConsoleWidget(input: UpdateConsoleWidgetInput!, dashboardId: String!): ConsoleWidget!
  UpdatePlayersWidget(input: UpdatePlayersWidgetInput!, dashboardId: String!): PlayersWidget!
  UpdateLogsWidget(input: UpdateLogsWidgetInput!, dashboardId: String!): LogsWidget!
}

input CreateProjectInput {
  name: String!
  description: String
}

input UpdateServerSettingsInput {
  whitelist: Boolean
  onlineMode: Boolean
  address: String
}

input UpdateDashboardConfigInput {
  name: String
  widgets: [MovableDashboardWidgetInput!]
}

input MovableDashboardWidgetInput {
  type: EWidgetType!
  x: Float!
  y: Float!
  width: Float!
  height: Float!
}

"""DashboardWidget's type (CONSOLE, PLAYERS, and so on...)"""
enum EWidgetType {
  PLAYERS
  CONSOLE
  LOGS
  CONTROLS
}

input UpdateControlsWidgetInput {
  enabled: Boolean
}

input UpdateConsoleWidgetInput {
  enabled: Boolean
}

input UpdatePlayersWidgetInput {
  enabled: Boolean
}

input UpdateLogsWidgetInput {
  enabled: Boolean
}

type Subscription {
  CurrentWorkerState(token: String!, projectId: String!): WorkerState!
}
